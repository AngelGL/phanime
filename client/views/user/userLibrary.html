<template name="userLibrary">

	<div class="container main-content">
		{{#each libraryEntries}}
			{{> UI.dynamic template="libraryEntryCard" data=this}}		
		{{/each}}
	</div>

</template>

<template name="libraryEntryCard">
	<div class="col-xs-6 col-sm-4 col-md-3 col-lg-2">

		<input type="hidden" value={{_id}} class="libraryEntryId">

		<div class="libraryEntryCard img-lg" style="background-image: url('{{anime.coverImageUrl}}')">
			
			<div class="important">
				{{anime.title}}
			</div>

			<div class="banner-gradient"></div>
			
			<div class="progress" style="width: {{getPercentage episodesSeen anime.totalEpisodes}}"></div>

			{{#if isUserIdCurrentUser userId}}
			<div class="libraryEntryForm">						

				<div class="form-group">
					<button class="btn btn-default dropdown-toggle change-entry-status-btn" type="button" id="watchStatus" data-toggle="dropdown">
						{{status}}
						<span class="caret"></span>
					</button>

					<ul class="dropdown-menu" style="left:auto; width: 190px; margin-top: -10px; top: 55px;" role="menu" aria-labelledby="watchStatus">
						{{#each watchStatuses}}
							<li><a class="status-item" style="cursor: pointer" data-status="{{this}}">{{this}}</a></li>
						{{/each}}
					</ul>
				</div>							

				<div class="form-group">
					<div class="entry-rating" id="rating_{{_id}}" data-rateit-value="{{rating}}"></div>
				</div>

				<div class="form-group">
					<input type="number" class="form-control input-sm input-inline entry-episodesSeen" placeholder="#" value="{{episodesSeen}}" min="1" max="{{anime.totalEpisodes}}" >
					<div class="entry-total-episodes"> / {{anime.totalEpisodes}}</div>
				</div>

				<div class="icon-group">
					<i class="fa {{entryPrivacyClass private}}"></i>
					<i class="fa fa-eye"></i>
					<i class="fa fa-exclamation-circle"></i>
				</div>

				<textarea class="form-control entry-comments" placeholder="Personal comments" value="{{comments}}" maxlength="140" rows="3"></textarea>

			</div>
			{{/if}}

		</div>

	</div>
</template>