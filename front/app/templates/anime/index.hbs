<div class="container">
	<div class="row main-content">
		<div class="col-md-3">
			<img {{bind-attr src=cover_image_url}} {{bind-attr title=title}} class="cover-image anime">
			<div class="thin-text">{{description}}</div>
		</div>
		<div class="col-md-9">
			<div class="row anime-info">
				<div class="col-sm-12" style="padding:0">
				{{type}} |
				{{episode_duration}} |
				{{age_rating}}

				{{#if session.isAuthenticated}}
					{{session.account.username}}
					<button class="btn btn-success btn-sm btn-beside" {{action 'toggle_ep_add'}}>+</button>
					<button class="btn btn-primary btn-sm btn-beside" {{action 'edit'}}>Edit</button>
				{{/if}}
				</div>
			</div>

			{{#if session.isAuthenticated}}
				{{#if isEditing}}
					<div class="well">
						<div class="row">
							<div class="col-sm-12">
								<form role="form">
									<div class="row">
										<div class="col-sm-12">
											<div class="form-group">
												<label>Anime Slug</label>
												{{slug}}
											</div>
										</div>
									</div>
									<div class="row">

										<div class="col-sm-6">
											<div class="form-group">
												<label>Anime Title</label>
												{{input type="text" value=title class="form-control"}}
											</div>

											<div class="form-group">
												<label>Anime Type</label>
												{{view Ember.Select content=anime_types value=type class="form-control"}}
											</div>

											<div class="form-group">
												<label>Avg. Episode Duration</label>
												{{input type="number" value=episode_duration class="form-control"}}
											</div>	

											<div class="form-group">
												<label>Start Date</label>
												{{view "datePicker" valueBinding="start_date" class="form-control" placeholder="Start Date"}}
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<label>Anime Status</label>
												{{view Ember.Select content=anime_statuses value=status class="form-control"}}
											</div>
											<div class="form-group">
												<label>Age Rating</label>
												{{view Ember.Select content=age_ratings value=age_rating class="form-control"}}
											</div>

											<div class="form-group">
												<label>Anime Total Episodes</label>
												{{input type="number" value=total_episodes class="form-control"}}
											</div>	

											<div class="form-group">
												<label>End Date</label>
												{{view "datePicker" valueBinding="end_date" class="form-control" placeholder="End Date"}}
											</div>											
										</div>
									</div>

									<hr>

									<div class="row">
										<div class="col-sm-12">
											<div class="form-group">
												<label>Description</label>
												{{textarea value=description class="form-control" rows="10"}}
											</div>
										</div>
									</div>

									<hr>

									<div class="row">
										<div class="col-sm-6">
											<div class="form-group">
												<label>Main Alternative Title</label>
												{{input type="text" value=main_alternative_title class="form-control"}}
											</div>

											<div class="form-group">
												<label>Anime Version</label>
												{{view Ember.Select content=anime_versions selection=version multiple="true" class="form-control"}}
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<label>Season Number</label>
												{{input type="number" value=season_number class="form-control"}}
											</div>
											<div class="form-group">
												<label>Alternative Titles</label>
												{{textarea value=alternative_titles class="form-control" rows="4"}}
											</div>
										</div>

									</div>

									<div class="row">
										<div class="col-sm-12">
											<button class="btn btn-primary btn-beside" {{action 'save_changes' this}}>Save Changes</button>
										</div>
									</div>

								</form>
							</div>
						</div>
					</div>
				{{/if}}
			{{/if}}

			{{#if session.isAuthenticated}}
				{{#if isAdding}}
					<div class="well">
						<div class="row">
							<div class="col-sm-12">
								<form role="form">
									<div class="row">

										<div class="col-sm-6">
											<div class="form-group">
												<label>Episode Number</label>
												{{input type="number" value=c_episode_number class="form-control" placeholder="Episode Number in series (No duplicates)"}}
											</div>
											<div class="form-group">
												<label>Air Date</label>
												{{view "datePicker" valueBinding="c_episode_air_date" class="form-control" placeholder="he day the episode aired"}}
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<label>Episode Title</label>
												{{input type="text" value=c_episode_title class="form-control" placeholder="Episode Title"}}
											</div>
										</div>

									</div>

									<div class="row">
										<div class="col-sm-12">
											<button class="btn btn-primary btn-sm btn-beside" {{action 'add_episode'}}>Add Episode</button>	
										</div>
									</div>

								</form>

							</div>

						</div>

					</div>

				{{/if}}
			{{/if}}

			<div class="table-responsive">
				<table class="table table-hover">
					<thead>
						<tr>
							<td>#</td>
							<td>Episode Title</td>
							<td>Air Date</td>
						</tr>
					<thead>

					<tbody>
						{{#each episodes}}
							<tr class="thin-text">
								<td>{{episode_number}}</td>
								<td>{{#if episode_title}} {{episode_title}} {{else}} -- {{/if}}</td>
								<td>{{#if air_date}} {{format-date-default air_date}} {{else}} -- {{/if}}</td>
							<tr>
						{{/each}}
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>
